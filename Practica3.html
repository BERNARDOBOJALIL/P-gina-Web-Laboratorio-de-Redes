<!DOCTYPE html>
<html lang="en">

  <head>
    <script>
      window.addEventListener('load', function() {
        setTimeout(() => {
          window.scrollTo(0, 0);
        }, 200); // Espera unos milisegundos y luego desplaza al inicio
      });
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>Portafolio Bernardo - Fernando</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-scholar.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet"href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>
<!--

TemplateMo 586 Scholar

https://templatemo.com/tm-586-scholar

-->
  </head>

<body>

  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="index.html" class="logo">
                        <h1>Laboratorio de Redes Digitales de Datos</h1>
                    </a>
                    <!-- ***** Logo End ***** -->
                  
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                      <li class="scroll-to-section"><a href="index.html" class="active">Regresar a las prácticas</a></li>
                      
                  </ul>   
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

  <div class="main-banner" id="inicio">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="owl-carousel owl-banner">
            <div class="">
              <div class="header-text">
                <div class="col-lg-12 text-center">
                  <h1 class="mt-5 text-white">Practica 3: “Wifi ESP32 – Thingspeak”  </h1>
                  <p class="text-white mt-3">Integrantes: Bernardo Bojalil Lorenzini, Fernando Agustín Hernández Rivas</p>
                  <p class="text-white">Fecha: 18/02/2025</p>
                  <p class="text-white">Segundo parcial</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section id="contenido" class="container mt-5">
    <div class="row">
        <div class="row justify-content-center">
            <h2 class="mt-5 mb-5">Resumen</h2>
            <p>El objetivo de esta práctica es conocer, identificar y verificar el funcionamiento de sensores digitales, analógicos e inteligentes mediante su integración con el ESP32 y la transmisión de datos a la plataforma ThingSpeak. Se trabajará con un botón (sensor digital), un potenciómetro (sensor analógico), un DHT22 (sensor inteligente para medición de temperatura y humedad) y un sensor PIR para la detección de movimiento.

              Además, se implementará la conexión del ESP32 a una red WiFi, permitiendo enviar datos a ThingSpeak mediante solicitudes, para su monitoreo en tiempo real. Esta práctica permitirá comprender el funcionamiento y las aplicaciones de distintos tipos de sensores en sistemas embebidos con comunicación en la nube.</p>

            <h2 class="mt-5 mb-5">Introducción</h2>
            <p>En el ámbito del Internet de las Cosas (IoT), la capacidad de los dispositivos para comunicarse y transmitir datos a través de Internet es esencial. El ESP32, un microcontrolador que integra conectividad Wi-Fi y Bluetooth, se destaca por su versatilidad en proyectos IoT, permitiendo la recopilación y envío de datos a plataformas en la nube para su monitoreo y análisis en tiempo real.

              Una de las plataformas gratuitas más utilizadas para pruebas simples es ThingSpeak, un servicio en la nube que facilita el almacenamiento, visualización y análisis de datos provenientes de dispositivos IoT. La interacción entre el ESP32 y ThingSpeak se realiza mediante solicitudes HTTP, específicamente utilizando el método HTTP GET para enviar datos desde el microcontrolador hacia la plataforma.
              
              El método HTTP GET es una de las principales técnicas del protocolo HTTP, empleada para solicitar datos de un servidor o, en este contexto, para enviar información desde el ESP32 a ThingSpeak. Al realizar una solicitud HTTP GET, los datos se incluyen en la URL de la solicitud, lo que permite al servidor recibir y procesar la información enviada. Esta metodología es ampliamente adoptada en aplicaciones IoT debido a su simplicidad y eficiencia en la transmisión de datos.
              
              En los ejercicios desarrollados, se demuestra cómo el ESP32 puede interactuar con diversos sensores (digitales, analógicos e inteligentes) para controlar un LED en función de las lecturas obtenidas.</p>

            <h2 class="mt-5 mb-5">Material y Equipos</h2>
            
          <div class="container">
            <div class="row justify-content-center"> 
              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://m.media-amazon.com/images/I/612eALAbpgL.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>ESP32</h4>
                  </div>
                </div>
              </div>
              
              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://tresdprinttech.com/wp-content/uploads/2024/02/PRB002.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>2 Protoboards</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://www.steren.com.mx/media/catalog/product/cache/295a12aacdcb0329a521cbf9876b29e7/image/1709082e0/led-de-5-mm-color-rojo-claro.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>1 LED</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://zenerbyte.com/wp-content/uploads/2023/01/Push-button-4-pines.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>1 Botón</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhXxIj0PLmngFeBFfF0aZEjqhKooLu7UfqAQ&s" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>1 Potenciómetro 5k</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://www.geekfactory.mx/wp-content/uploads/2014/04/dht22-sensor-de-temperatura-y-humedad-relativa.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>1 Sensor DHT22</h4>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://www.steren.com.mx/media/catalog/product/cache/0236bbabe616ddcff749ccbc14f38bf2/image/19454216b/sensor-de-movimiento-pir.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>1 Sensor PIR</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://silicio.mx/media/catalog/product/cache/1/image/650x650/5e06319eda06f020e43594a9c230972d/c/a/cab110c4m/Cables-Jumper-para-Protoboard---(200mm_165mm_125mm_80mm)-31.jpg" alt="" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                    <h4>+10 jumpers macho-macho y hembra-macho</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://http2.mlstatic.com/D_NQ_NP_839639-MLM41892100257_052020-O.webp">
                    <h4>Resistencias 220Ω y 1kΩ </h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://m.media-amazon.com/images/I/71QGa1J+egL.jpg">
                    <h4>1 cable micro USB a USB A </h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://intercompras.com/images/product/HUAWEI_53011XKM.jpg">
                    <h4>Laptop</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://images.vexels.com/media/users/3/132687/isolated/preview/0207a74a86c5255a9d6458e587f1e9e4-icono-de-wifi-plana.png?w=360">
                    <h4>Acceso a WiFi</h4>
                  </div>
                </div>
              </div>

              <div class="col-lg-3 col-md-6 mb-4">
                <div class="custom-card text-center">
                  <div class="card-body">
                    <img src="https://cdn.sparkfun.com/assets/home_page_posts/6/8/0/8/CollectAgriculturalDataOverTheThingsNetworkTSExample_11.png">
                    <h4>Plataforma Thingspeak</h4>
                  </div>
                </div>
              </div>

            </div>
          </div>


          

          <h2 class="mt-20 mb-5" style="margin-top: 30px;">Desarrollo</h2>


<!-- Contenedor principal -->
<div class="container">
  <div class="row">
    <!-- Card 1 -->
    <div class="col-lg-12 mb-4">
      <div class="card p-4">
        <h5 class="card-title">Ejercicio 1: Desarrollar un programa de encendido de un LED con un botón (sensor digital) y envío de datos a ThingSpeak. </h5>
        <p class="card-text" style="font-size: 14px; color: #555;">
          Este ejercicio consiste en utilizar un botón y un LED con un microcontrolador. El botón está conectado al puerto GPIO 33 y el LED al puerto GPIO 32. En el código, se lee el estado del botón; si está presionado (estado 1), el LED se enciende, y si no lo está (estado 0), el LED se apaga.
          Además, el estado del botón se envía a ThingSpeak cada 3 segundos. Para ello, el microcontrolador se conecta a una red WiFi, construye una solicitud HTTP con el estado actual y la envía al servidor de ThingSpeak, permitiendo visualizar los datos en tiempo real.
        </p>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="col-lg-12 mb-4">
      <div class="card p-4">
        <h5 class="card-title">Ejercicio 2: Desarrollar un programa de encendido de un LED con un potenciómetro (sensor analógico) y envío de datos a ThingSpeak. </h5>
        <p class="card-text" style="font-size: 14px; color: #555;">
          Este ejercicio usa un potenciómetro para controlar un LED. El potenciómetro está conectado al puerto GPIO 33 y el LED al puerto GPIO 32. El valor analógico del potenciómetro se lee continuamente. Si el valor es mayor o igual a 2048 (mitad del rango de 0-4095), el LED se enciende; de l, el microcontrolador envía el valor del potenciómetro a ThingSpeak, permitiendo visualizar la variación de la lectura en una gráfica. Para ello, se establece una conexión WiFi y se envía la información mediante una solicitud HTTP al servidor.
        </p>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="col-lg-12 mb-4">
      <div class="card p-4">
        <h5 class="card-title">Ejercicio 3: Control de LED basado en la humedad con sensor DHT22 (sensor inteligente) y envío de datos a ThingSpeak. </h5>
        <p class="card-text" style="font-size: 14px; color: #555;">
          Este ejercicio utiliza un sensor DHT22 para medir la temperatura y la humedad. El sensor está conectado al puerto GPIO 33 y el LED al puerto GPIO 32. El código lee cada segundo la temperatura y humedad, imprimiendo los valores en el monitor serial. Si la humedad es superior al 50%, el LED se enciende, y si es menor o igual, se apaga.
          Cada segundo, los valores de temperatura y humedad se envían a ThingSpeak a través de una solicitud HTTP a dos campos diferentes. Esto permite visualizar los datos en la nube en tiempo real.
        </p>
      </div>
    </div>

    <div class="col-lg-12 mb-4">
      <div class="card p-4">
        <h5 class="card-title">Ejercicio 4: Detección de movimiento con sensor PIR (sensor digital) y envío de datos a ThingSpeak.  </h5>
        <p class="card-text" style="font-size: 14px; color: #555;">
          Este ejercicio utiliza un sensor PIR para detectar movimiento. El sensor está conectado al puerto GPIO 33 y el LED al puerto GPIO 32. El código detecta el movimiento y enciende el LED, mientras imprime un mensaje en el monitor serial cuando detecta o deja de detectar movimiento. Si no hay movimiento, el LED permanece apagado. Para monitoreo remoto, el estado del sensor PIR se envía a ThingSpeak cada 100 milisegundos. 
        </p>
      </div>
    </div>
    </div>
  </div>
</div>
          


<h2 class="mt-20 mb-5" style="margin-top: 30px;">Simulación</h2>

<div class="col-12 mb-4">
  <div class="card p-4 text-center">
    <h3 class="card-title mb-3">Ejercicio 1</h3>
    
    <h5 class="mb-2">Video</h5>
    <video width="100%" height="350" controls>
      <source src="assets/images/P3-E1.mp4" type="video/mp4">
      Tu navegador no soporta la reproducción de video.
    </video>
    
    <h5 class="mt-4 mb-2">Simulación y Datos</h5>
    <div class="row">
      <div class="col-md-6 text-center">
        <h6 class="mb-3">Simulación Wokwi</h6>
        <iframe src="https://wokwi.com/projects/423530226590018561" 
                width="100%" 
                height="500" 
                frameborder="0" 
                allowfullscreen>
        </iframe>
      </div>
      <div class="col-md-6 d-flex flex-column align-items-center justify-content-center" style="height: 500px;">
        <h6 class="mb-3">Datos ThingSpeak</h6>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" 
                src="https://thingspeak.com/channels/2844718/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
        </iframe>
      </div>
    </div>
  </div>
</div>


<div class="col-12 mb-4">
  <div class="card p-4 text-center">
    <h3 class="card-title mb-3">Ejercicio 2</h3>
    
    <h5 class="mb-2">Video</h5>
    <video width="100%" height="350" controls>
      <source src="assets/images/P3-E2.mp4" type="video/mp4">
      Tu navegador no soporta la reproducción de video.
    </video>
    
    <h5 class="mt-4 mb-2">Simulación y Datos</h5>
    <div class="row">
      <div class="col-md-6 text-center">
        <h6 class="mb-3">Simulación Wokwi</h6>
        <iframe src="https://wokwi.com/projects/423530514581432321" 
                width="100%" 
                height="500" 
                frameborder="0" 
                allowfullscreen>
        </iframe>
      </div>
      <div class="col-md-6 d-flex flex-column align-items-center justify-content-center" style="height: 500px;">
        <h6 class="mb-3">Datos ThingSpeak</h6>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" 
                src="https://thingspeak.com/channels/2844718/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
        </iframe>
      </div>
    </div>
  </div>
</div>

<div class="col-12 mb-4">
  <div class="card p-4 text-center">
    <h3 class="card-title mb-3">Ejercicio 3</h3>
    
    <h5 class="mb-2">Video</h5>
    <video width="100%" height="350" controls>
      <source src="assets/images/P3-E3.mp4" type="video/mp4">
      Tu navegador no soporta la reproducción de video.
    </video>
    
    <h5 class="mt-4 mb-2">Simulación y Datos</h5>
    <div class="row">
      <div class="col-md-6 text-center">
        <h6 class="mb-3">Simulación Wokwi</h6>
        <iframe src="https://wokwi.com/projects/423608965137763329" 
                width="100%" 
                height="500" 
                frameborder="0" 
                allowfullscreen>
        </iframe>
      </div>
      <div class="col-md-6 d-flex flex-column align-items-center justify-content-center" style="height: 500px;">
        <h6 class="mb-3">Datos ThingSpeak</h6>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" 
                src="https://thingspeak.com/channels/2844718/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
        </iframe>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" 
                src="https://thingspeak.com/channels/2844718/charts/5?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
        </iframe>
      </div>
    </div>
  </div>
</div>


<div class="col-12 mb-4">
  <div class="card p-4 text-center">
    <h3 class="card-title mb-3">Ejercicio 4</h3>
    
    <h5 class="mb-2">Video</h5>
    <video width="100%" height="350" controls>
      <source src="assets/images/P3-E4.mp4" type="video/mp4">
      Tu navegador no soporta la reproducción de video.
    </video>
    
    <h5 class="mt-4 mb-2">Simulación y Datos</h5>
    <div class="row">
      <div class="col-md-6 text-center">
        <h6 class="mb-3">Simulación Wokwi</h6>
        <iframe src="https://wokwi.com/projects/423609249377376257" 
                width="100%" 
                height="500" 
                frameborder="0" 
                allowfullscreen>
        </iframe>
      </div>
      <div class="col-md-6 d-flex flex-column align-items-center justify-content-center" style="height: 500px;">
        <h6 class="mb-3">Datos ThingSpeak</h6>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" 
                src="https://thingspeak.com/channels/2844718/charts/4?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
        </iframe>
      </div>
    </div>
  </div>
</div>



<h2 class="mt-5 mb-5">Diseño (En la práctica solo se diseñó el ejercicio 4)</h2>
            <p>El circuito consta de un sensor de movimiento PIR conectado al pin 33 de un ESP32 y un LED conectado al pin 32. El sensor PIR detecta movimiento y activa el LED, además de enviar los datos de detección a la plataforma en la nube ThingSpeak a través de una conexión WiFi.

              El sensor PIR se conecta de la siguiente manera: su VCC a 3.3V del ESP32, GND a GND del ESP32 y la señal de salida al pin GPIO 33. El LED se conecta con su ánodo al pin GPIO 32 del ESP32, su cátodo a una resistencia de 220Ω y la otra terminal de la resistencia a GND.
              
              El código inicia configurando el ESP32 para conectarse a una red WiFi, estableciendo el sensor PIR como entrada y el LED como salida. Una vez establecida la conexión WiFi, el ESP32 entra en un bucle donde monitorea continuamente el estado del sensor PIR. Si detecta movimiento, enciende el LED y envía un valor a ThingSpeak mediante una solicitud HTTP GET.
              
              El ESP32 establece la conexión WiFi con las credenciales del usuario. El sensor PIR detecta movimiento y actualiza su estado. Si se detecta movimiento, el ESP32 enciende el LED y envía un valor de 1 a ThingSpeak. Si no hay movimiento, envía un valor de 0. El envío de datos se realiza a través de una solicitud HTTP GET con la clave de API y el valor del sensor en la URL de ThingSpeak. ThingSpeak recibe y almacena los datos, que pueden visualizarse en tiempo real a través de su panel de control.
              
              
              
              


              <figure style="text-align: center; margin: 20px auto; width: 100%;">
                <img src="assets/images/Añadir un poco de texto.jpg" alt="Descripción de la imagen" style="width: 100%;">
                <figcaption style="font-size: 14px; color: gray; margin-top: 5px;">
                    Estructura de código para acceso a la red y envío de datos.
                </figcaption>
            </figure>
            

            

   


<h2 class="mt-20 mb-5" style="margin-top: 40px;">Construcción del Circuito</h2>


<!-- Contenedor principal -->
<div class="container">
  <div class="row justify-content-center">
    <!-- Card 1 -->
    <div class="col-md-12 mb-4">
      <div class="card p-4 shadow-lg rounded-lg">
        <h4 class="card-title mb-4">Ejercicio 1: Sensor digital (botón) y envío de datos a ThingSpeak.</h4>
        <div class="row align-items-center">
          <!-- Video -->
          <div class="col-md-6">
            <video class="video-box rounded-lg" controls>
              <source src="assets/images/P3-V1.mp4" type="video/mp4">
              Tu navegador no soporta la reproducción de video.
            </video>
          </div>
          <!-- Código con slider vertical -->
          <div class="col-md-6 position-relative">
            <button class="copy-btn" onclick="copyCode('code1')">Copiar el código al portapapeles</button>
            <div class="code-container rounded-lg">
              <pre class="code-box"><code id="code1">
#include WiFi.h
#include HTTPClient.h

//Puertos GPIO
int boton = 33;
int led = 32;

//Variables status
int status_boton = 0;

//Thingspeak
String url = "https://api.thingspeak.com/update?"; //Server URL
String api_key = "30SP23F21BFFSKVZ"; //API key personal del tablero
String sensor = "field1";

void setup() {
    // Configuración inicial
    pinMode(led, OUTPUT); // Configurar el LED como salida
    pinMode(boton, INPUT); // Configurar el botón como entrada

    delay(1000);
    Serial.begin(115200);

    // Conectar a la red WiFi
    WiFi.begin("LAPTOP-AJFEJ7IT-6883", "1Tw8:078"); // Sustituir por tu red y contraseña

    // Esperar hasta que se conecte a la red WiFi
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }

    Serial.println("WiFi conectado");
}

void loop() {
    // Leer estado del botón
    status_boton = digitalRead(boton);

    if (status_boton == 1) {
        digitalWrite(led, HIGH);
    } else {
        digitalWrite(led, LOW);
    }

    // Esperar conexión WiFi antes de enviar datos
    if (WiFi.status() == WL_CONNECTED) {
        HTTPClient http;
        String message = url + "api_key=" + api_key + "&" + sensor + "=" + String(status_boton);
        http.begin(message);

        int httpCode = http.GET();
        Serial.println(message);
        Serial.print("GET code: ");
        Serial.println(httpCode);

        http.end();
    }

    delay(3000);
}
              </code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12 mb-4">
      <div class="card p-4 shadow-lg rounded-lg">
        <h4 class="card-title mb-4">Ejercicio 2: Sensor Analógico (Potenciómetro) y envío de datos a ThingSpeak.</h4>
        <div class="row align-items-center">
          <!-- Video -->
          <div class="col-md-6">
            <video class="video-box rounded-lg" controls>
              <source src="assets/images/P3-V2.mp4" type="video/mp4">
              Tu navegador no soporta la reproducción de video.
            </video>
          </div>
          <!-- Código con slider vertical -->
          <div class="col-md-6 position-relative">
            <button class="copy-btn" onclick="copyCode('code2')">Copiar el código al portapapeles</button>
            <div class="code-container rounded-lg">
              <pre class="code-box"><code id="code2">
#include WiFi.h
#include HTTPClient.h

//Puertos GPIO
int pot = 33;
int led = 32;

//Variables status
int valor_analogico = 0;

//Thingspeak
String url = "https://api.thingspeak.com/update?"; //Server URL
String api_key = "30SP23F21BFFSKVZ"; //API key personal del tablero
String sensor = "field1";

void setup() {
    // Configuración inicial
    pinMode(led, OUTPUT); // Configurar LED como salida

    delay(1000);
    Serial.begin(115200);

    // Conectar a la red WiFi
    WiFi.begin("LAPTOP-AJFEJ7IT-6883", "1Tw8:078"); // Sustituir por tu red y contraseña

    // Esperar hasta que se conecte a la red WiFi
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }

    Serial.println("WiFi conectado");
}

void loop() {
    // Leer el valor analógico del potenciómetro
    valor_analogico = analogRead(pot);

    if (valor_analogico >= 2048) {
        digitalWrite(led, HIGH);
    } else {
        digitalWrite(led, LOW);
    }

    // Esperar conexión WiFi antes de enviar datos
    if (WiFi.status() == WL_CONNECTED) {
        HTTPClient http;
        String message = url + "api_key=" + api_key + "&" + sensor + "=" + String(valor_analogico);
        http.begin(message);

        int httpCode = http.GET();
        Serial.println(message);
        Serial.print("GET code: ");
        Serial.println(httpCode);

        http.end();
    }

    delay(1000);
}
              </code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12 mb-4">
      <div class="card p-4 shadow-lg rounded-lg">
        <h4 class="card-title mb-4">Ejercicio 3: Sensor Inteligente (DHT22) y envío de datos a ThingSpeak.</h4>
        <div class="row align-items-center">
          <!-- Video -->
          <div class="col-md-6">
            <video class="video-box rounded-lg" controls>
              <source src="assets/images/P3-V3.mp4" type="video/mp4">
              Tu navegador no soporta la reproducción de video.
            </video>
          </div>
          <!-- Código con slider vertical -->
          <div class="col-md-6 position-relative">
            <button class="copy-btn" onclick="copyCode('code3')">Copiar el código al portapapeles</button>
            <div class="code-container rounded-lg">
              <pre class="code-box"><code id="code3">
// Librerías
#include DHT.h
#include WiFi.h
#include HTTPClient.h

// Puertos GPIO
int led = 32;

// DHT22
DHT dht(33, DHT22); // DHTPIN, DHTTYPE

// Variables status
int valor_temperatura = 0;
int valor_humedad = 0;

// Thingspeak
String url = "https://api.thingspeak.com/update?"; // Server URL
String api_key = "30SP23F21BFFSKVZ"; // API key personal del tablero
String sensor_humedad = "field1";
String sensor_temperatura = "field2";

void setup() {
    // Configuración inicial
    pinMode(led, OUTPUT); // Configurar LED como salida
    dht.begin(); // Inicializamos el sensor DHT

    delay(1000);
    Serial.begin(115200);

    // Conectar a la red WiFi
    WiFi.begin("LAPTOP-AJFEJ7IT-6883", "1Tw8:078"); // Sustituir por tu red y contraseña

    // Esperar hasta que se conecte a la red WiFi
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }

    Serial.println("WiFi conectado");
}

void loop() {
    // Leer valores de temperatura y humedad del DHT22
    delay(1000);
    valor_temperatura = dht.readTemperature();
    valor_humedad = dht.readHumidity();

    // Mostrar valores en el monitor serial
    Serial.print("Temperatura: ");
    Serial.println(valor_temperatura);
    Serial.print("Humedad: ");
    Serial.println(valor_humedad);

    // Control del LED basado en la humedad
    if (valor_humedad >= 50) { // Si la humedad es mayor al 50%
        digitalWrite(led, HIGH);
    } else {
        digitalWrite(led, LOW);
    }

    // Enviar datos a ThingSpeak si hay conexión WiFi
    if (WiFi.status() == WL_CONNECTED) {
        HTTPClient http;
        String message = url + "api_key=" + api_key + "&" + sensor_humedad + "=" + String(valor_humedad) + "&" + sensor_temperatura + "=" + String(valor_temperatura);
        http.begin(message);

        int httpCode = http.GET();
        Serial.println(message);
        Serial.print("GET code: ");
        Serial.println(httpCode);

        http.end();
    }

    delay(1000);
}
              </code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12 mb-4">
      <div class="card p-4 shadow-lg rounded-lg">
        <h4 class="card-title mb-4">Ejercicio 4: Sensor digital (PIR) y envío de datos a ThingSpeak.</h4>
        <div class="row align-items-center">
          <!-- Video -->
          <div class="col-md-6">
            <video class="video-box rounded-lg" controls>
              <source src="assets/images/P3-V4.mp4" type="video/mp4">
              Tu navegador no soporta la reproducción de video.
            </video>
          </div>
          <!-- Código con slider vertical -->
          <div class="col-md-6 position-relative">
            <button class="copy-btn" onclick="copyCode('code4')">Copiar el código al portapapeles</button>
            <div class="code-container rounded-lg">
              <pre class="code-box"><code id="code4">
// Librerías
#include WiFi.h
#include HTTPClient.h

// Puertos GPIO
int led = 32;
int pirSensor = 33; // Pin del sensor PIR

// Variables status
int pirState = LOW;
int val = 0;

// ThingSpeak
String url = "https://api.thingspeak.com/update?"; // Server URL
String api_key = "30SP23F21BFFSKVZ"; // API key personal del tablero
String sensor = "field1";

void setup() {
    // Configuración inicial
    pinMode(led, OUTPUT); // Configurar LED como salida
    pinMode(pirSensor, INPUT); // Configurar PIR como entrada
    
    Serial.begin(115200);
    delay(1000);

    // Conectar a la red WiFi
    WiFi.begin("LAPTOP-AJFEJ7IT-6883", "1Tw8:078"); // Sustituir por tu red y contraseña

    // Esperar hasta que se conecte a la red WiFi
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }

    Serial.println("WiFi conectado");
}

void loop() {
    val = digitalRead(pirSensor);  // Leer el estado del PIR
    
    if (val == HIGH) { // Si detecta movimiento
        digitalWrite(led, HIGH); // Encender LED
        if (pirState == LOW) {
            Serial.println("¡Movimiento detectado!");
            pirState = HIGH;
        }
    } else { // Si no hay movimiento
        digitalWrite(led, LOW); // Apagar LED
        if (pirState == HIGH) {
            Serial.println("Movimiento finalizado");
            pirState = LOW;
        }
    }
    
    // Enviar datos a ThingSpeak si hay conexión WiFi
    if (WiFi.status() == WL_CONNECTED) {
        HTTPClient http;
        String message = url + "api_key=" + api_key + "&" + sensor + "=" + String(val);
        http.begin(message);

        int httpCode = http.GET();
        Serial.println(message);
        Serial.print("GET code: ");
        Serial.println(httpCode);

        http.end();
    }
    
    delay(100); // Pequeña pausa antes de la siguiente lectura
}
              </code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <h2 class="mt-5 mb-5">Resultados</h2>
    <p> Todos los ejercicios se realizaron de acuerdo con lo planeado, logrando la comunicación entre los sensores y la plataforma ThingSpeak para el monitoreo de datos en la nube. Sin embargo, se observó que, aunque ThingSpeak es una herramienta gratuita y funcional, los tiempos de respuesta son considerablemente lentos. Durante las pruebas, se verificó que el registro de los cambios en los sensores tardaba aproximadamente cinco minutos en reflejarse en la plataforma, lo que puede representar una limitación para aplicaciones que requieren monitoreo en tiempo real.

      Otro factor que pudo haber influido en los tiempos de respuesta fue el uso de una computadora como hotspot de internet. Esto se debió a que la red institucional no permite la conexión de dispositivos como el ESP32, lo que obligó a utilizar una red alternativa. Es posible que la estabilidad y velocidad de la conexión hayan afectado el tiempo que tardan los datos en transmitirse a ThingSpeak.
      
      A pesar de estas limitaciones, los ejercicios cumplieron con su propósito, demostrando el funcionamiento de sensores digitales, analógicos e inteligentes en conjunto con un microcontrolador y la capacidad de enviar información a la nube para su visualización remota.
    <h2 class="mt-5 mb-5">Conclusiones</h2>
    <p>Esta práctica nos permitió aprender el manejo de entradas y salidas en el ESP32, así como la integración de sensores con la plataforma ThingSpeak para el monitoreo de datos en la nube. Se comprobó el funcionamiento de sensores digitales, analógicos e inteligentes, además del envío de información mediante solicitudes HTTP. Sin embargo, se observó que los tiempos de actualización en ThingSpeak son lentos, con un retraso de aproximadamente diez segundos en el registro de los datos. Esta práctcia demuestra el potencial del Internet de las Cosas (IoT), que permite la recopilación y análisis de datos en tiempo real para diversas aplicaciones, como el monitoreo ambiental, la automatización del hogar y la industria.</p>

              <h2 class="mt-5 mb-5">Refrencias</h2>
              <ul>
                <li><a href="https://www.juanjobeunza.com/esp32-wifi/" target="_blank">Beunza, J. (2020, 25 junio). ESP32 conexión via WiFi.</a></li>
                <li><a href="https://www.electronicwings.com/esp32/esp32-wi-fi-basics-getting-started" target="_blank">ESP32 Wi-Fi Basics Getting started | ESP32. (s. f.). © 2018 ElectronicWings.</a></li>
                <li><a href="https://docs.wokwi.com/guides/esp32-wifi" target="_blank">ESP32 WiFi Networking | Wokwi Docs. (s. f.).</a></li>
                <li><a href="https://randomnerdtutorials.com/esp32-http-get-post-arduino/?utm_source=chatgpt.com" target="_blank">Santos, R., & Santos, R. (2022, 27 octubre). ESP32 HTTP GET and HTTP POST with Arduino IDE | Random Nerd Tutorials.</a></li>
            </ul>
            
            
              <div></div>
              <div></div>
                        
  </div>
</div>

<!-- Script para copiar el código -->
<script>
function copyCode(id) {
  var code = document.getElementById(id).innerText;
  navigator.clipboard.writeText(code).then(() => {
    alert("Código copiado al portapapeles!");
  });
}
</script>




</section>

<footer>
  <div class="container">
    <div class="col-lg-30">
      <p>Copyright © 2036 Scholar Organization. All rights reserved. &nbsp;&nbsp;&nbsp; Design: <a href="https://templatemo.com" rel="nofollow" target="_blank">TemplateMo</a></p>
    </div>
  </div>
</footer>

<!-- Scripts -->
<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/isotope.min.js"></script>
<script src="assets/js/owl-carousel.js"></script>
<script src="assets/js/counter.js"></script>
<script src="assets/js/custom.js"></script>




</body>

</script>

</html>